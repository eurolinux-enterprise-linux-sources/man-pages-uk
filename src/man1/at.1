." © 2005-2007 DLOU, GNU FDL
." URL: <http://docs.linux.org.ua/index.php/Man_Contents>
." Supported by <docs@linux.org.ua>
."
." Permission is granted to copy, distribute and/or modify this document
." under the terms of the GNU Free Documentation License, Version 1.2
." or any later version published by the Free Software Foundation;
." with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
." 
." A copy of the license is included  as a file called COPYING in the
." main directory of the man-pages-* source package.
."
." This manpage has been automatically generated by wiki2man.py
." This tool can be found at: <http://wiki2man.sourceforge.net>
." Please send any bug reports, improvements, comments, patches, etc. to
." E-mail: <wiki2man-develop@lists.sourceforge.net>.

.TH "at" "1" "2007-10-27-16:31" "© 2005-2007 DLOU, GNU FDL" "2007-10-27-16:31"

.SH "НАЗВА"
.PP
at,  batch,  atq,  atrm  \-  планує,  виводить  або  усуває завдання для пізнішого виконання

.SH "СТИСЛИЙ ОГЛЯД"
.PP
\fBat\fR [\fB\-V\fR] [\fB\-q\fR \fIчерга\fR] [\fB\-f\fR \fIфайл\fR] [\fB\-mldbv\fR] \fIЧАС\fR
.br

\fBat\fR \fB\-c\fR \fIзавдання\fR [\fIзавдання\fR...]
.br

\fBatq\fR [\fB\-V\fR] [\fB\-q\fR \fIчерга\fR]
.br

\fBatrm\fR [\fB\-V\fR] \fIзавдання\fR [\fIзавдання\fR...]
.br

\fBbatch\fR [\fB\-V\fR] [\fB\-q\fR \fIчерга\fR] [\fB\-f\fR \fIфайл\fR] [\fB\-mv\fR] [\fIЧАС\fR]

.SH "ОПИС"
.PP
\fBat\fR і \fBbatch\fR  читають  команди  зі  стандартного  вводу  або
вказаного   їм   файлу,   які   буде   виконано   пізніше,
використовуючи \fB/bin/sh\fR.

.TP
.B \fBat\fR
 Виконує команди у вказаний час.

.TP
.B \fBatq\fR
 Перераховує, очікуючи свого виконання, завдання, що належать   користувачеві,   хіба   користувачем   є надкористувач;      у      останньому      випадку, перераховуються  завдання всіх користувачів. Формат виводу, що використовується, (по  одному  рядку  на кожне  завдання)  є:  номер завдання, дата, година, категорія завдання.

.TP
.B \fBatrm\fR
 Вилучає завдання, ідентифіковані за їхнім  номером.

.TP
.B \fBbatch\fR
 Виконує  команди  коли  рівень навантаження системи дозволяє   це.   Іншими   словами,   коли   середнє навантаження  падає до 0.8, або значення, вказаного при виклику \fBatrun\fR.

\fBat\fR дозволяє доволі складний опис  часу,  що  простягається
поза  стандарт POSIX 2. Команді можна надати аргумент часу
у формі \fIГГ\fR:\fIХХ\fR для виконання завдання у  певний  час  доби.
(Якщо  цей час вже минув, вважатиметься, що це завдання на
наступний день.) Ви можете також вказати \fBmidnight\fR  (північ
24:00),  \fBnoon\fR  (полудень  12:00)  або  \fBteatime\fR  (16:00  по
полудню).  Крім того, ви можете вказувати  годину  доби  з
суфіксами  \fBAM\fR  (Ante Meridiem) або \fBPM\fR (Post Meridiem), щоб
відповідно запустити завдання вночі й зранку або  вдень  і
вечором.   Можна  також  вказати  в  який  день  запустити
завдання,   вказуючи   дату   як   \fIназва\fR\fB_\fR\fIмісяця\fR   \fIдень\fR   з
необов'язковим  \fIроком\fR, або надаючи дату у формі \fIММДДРР\fR або
\fIММ\fR/\fIДД\fR/\fIРР\fR або ж \fIДД\fR.\fIММ\fR.\fIРР\fR.  Вказівка дати \fIповинна\fR  слідувати
за описом часу. Наприклад:

.RS
.nf
 at 01.30 22.02.2006

.fi
.RE
Замість  дати  в  цьому  прикладі ви могли б також вказати
ключові слова \fBtoday\fR або \fBtomorrow\fR, для  для  сьогоднішнього
дня  або  завтрашнього, відповідно.  Час можна вказувати і
як \fBnow\fR \fB+\fR  \fIчисло\fR  \fIчасових\fR\fB_\fR\fIодиниць\fR,  де  часовими  одиницями
можуть бути \fBminutes\fR, \fBhours\fR або \fBweeks\fR.

Ось ще декілька прикладів:

.RS
.nf
 at 4pm + 3 days  \- завдання о 16:00 через чотири дні
 at 10am Jul 31   \- завдання на 10.00 31 Липня
 at 1am tomorrow  \- завдання о 01:00 завтра

.fi
.RE
Файл  \fI/usr/doc/at\-3.1.8/timespec\fR  містить точні визначення
опису часу.

Підля вказівки часу на командному рядку слід притиснути \fBEnter\fR, після чого ввести команди, які буде виконано.
Для  обох  програм,  \fBat\fR  і  \fBbatch\fR,  команди  читаються  зі
стандартного вводу, або з файлу, якщо такий надано слід за
прапорцем   \fB\-f\fR.  Кінець вводу потрібно вказати комбінацією \fBCtrl+D\fR.  

.RS
.nf
 Робоча   директорія,   середовище   (за виключенням  змінних  \fBTERM\fR,  \fBDISPLAY\fR і \fB_\fR) i маска дозволів

.fi
.RE
(umask)  запозичуються  з  середовища   виклику   команди.
Команди  \fBat\fR  \fB\-\fR  або  \fBbatch\fR \fB\-\fR викликані з надкористувацької
оболонки    (дивіться    \fBsu\fR(1))     збережуть     поточний
ідентифікаційний  номер  користувача.  У  випадку помилки,
користувачеві буде надіслано поштою  стандартний  вивід  і
стандартну    помилку   виконаних   команд.   Пошту   буде
відправлено,   використовуючи   \fBsendmail\fR(8).    Якщо    \fBat\fR
викликано   з   оболонки   \fBsu\fR(1),  пошту  отримає  власник
реєстраційної оболонки.

Надкористувач завжди має право виконувати всі команди; для
решти  користувачів, дозвіл на виконання \fBat\fR встановлюється
файлами \fI/etc/at.allow\fR і \fI/etc/at.deny\fR.

Якщо  файл  \fI/etc/at.allow\fR  присутній,  лише  користувачам,
переліченим у ньому дозволено використовувати \fBat\fR.

И   випадку  ж  відсутності  \fI/etc/at.allow\fR,  перевіряється
\fI/etc/at.deny\fR,  і  кожному   користувачеві,   що   там   не
числиться, буде надано дозвіл на використання \fBat\fR.

Якщо  жодного  з цих файлів немає, тільки надкористувачеві
дозволятиметься запускати \fBat\fR.

Порожній \fI/etc/at.deny\fR означає, що  кожний  користувач  має
доступ до \fBat\fR, це являться стандартною конфігурацією.

.SH "ОПЦІЇ"
.PP
.TP
.B \fB\-V\fR
 Виводить   номер  версії  програми  на  стандартний пристрій помилки.

.TP
.B \fB\-q\fR \fIпозначка\fR
 Встановлює позначку для завдань або  груп  завдань; \fBпозначка\fR може складатися з однієї літери від \fBa\fR до \fBz\fR і  від  \fBA\fR  до  \fBZ\fR.  Літера  \fBa\fR  використовується   за замовчуванням  для  \fBat\fR,  тоді  як  \fBb\fR  \-  для \fBbatch\fR. Завдання  зі  "старшими"  літерами  виконуються   з нижчим   пріоритетом.   Спеціальна   позначка   "=" зарезервована  для  завдань,  які   виконуються   у поточний момент.

Якщо  завдання  було вказане з позначкою, що складається з
літери верхнього регістру, воно розглядатиметься так, ніби
його  започаткували  за допомогою \fBbatch\fR.  Коли команді \fBatq\fR
надано як аргумент певну позначку завдання, виводитиметься
інформація лишень про завдання з цією позначкою.

.TP
.B \fB\-m\fR
  Надсилає    листа   користувачеві   по   завершенню завдання, навіть якщо не відбулося жодного  виводу. 

.TP
.B \fB\-f\fR \fIфайл\fR
 Читає завдання з \fIфайлу\fR, замість стандартного вводу.

.TP
.B \fB\-l\fR
 Являється синонімом для \fBatq\fR.

.TP
.B \fB\-d\fR
 Синонім \fBatrm\fR.

.TP
.B \fB\-v\fR
 Виводитиме також час, коли завдання буде  виконано.

Відображення   часу   відбуватиметься   у   форматі   типу
"1997\-02\-20   14:50",   хіба   було   встановлену   змінну
середовища \fBPOSIXLY_CORRECT\fR, в такому разі формат буде "Thu
Feb 20 14:50:00 1996".

.TP
.B \fB\-c\fR
  Виводить на стандартний вивід команди, що містяться у  завданні,  разом  зі  всіма змінними середовища. Візьме  у   якості   аргументу   порядковий   номер завдання, наприклад: `at \-c 36'.

.SH "ФАЙЛИ"
.PP
\fI/var/spool/atjobs\fR
.br

\fI/var/spool/atspool\fR
.br

\fI/proc/loadavg\fR
.br

\fI/var/run/utmp\fR
.br

\fI/etc/at.allow\fR
.br

\fI/etc/at.deny\fR
.br

.SH "ДИВІТЬСЯ ТАКОЖ"
.PP
\fBcron\fR(1), 
\fBnice\fR(1), 
\fBsh\fR(1), 
\fBumask\fR(2), 
\fBatd\fR(8).

.SH "ВАДИ"
.PP
Правильне   виконання   \fBbatch\fR   на  Лінуксі  залежить  від
наявності  каталогу,  призначеного  для   інформації   про
поточні процеси, як правило це \fB/proc\fR (дивіться \fBproc\fR(5)).

Якщо  файл  \fI/var/run/utmp\fR  недоступний або зруйновано, або
якщо користувач  відсутній  під  час  виконання  завдання,
пошту  буде  послано  користувачеві,  чий ідентифікаційний
номер буде знайдено у змінній середовища \fBLOGNAME\fR.  Якщо цю
змінну   не  означено,  або  вона  порожня,  вживатиметься
поточний ідентифікаційний номер.

Програми \fBat\fR і \fBbatch\fR, у  сучасному  стані,  не  придатні  у
випадку,  коли користувачі змагаються за системні ресурси.
Якщо це стосується вашої  системи,  вам  варто  розглянути
інші знаряддя виконання порцій завдань, наприклад \fBnqs\fR.

.SH "АВТОРИ"
.PP
Програма  \fBat\fR  головним  чином була написана Thomas  Koenig
ig25@rz.uni\-karlsruhe.de.

Переклав українською Віталій Цибуляк.

