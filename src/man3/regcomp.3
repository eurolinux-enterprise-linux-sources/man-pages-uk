." © 2005-2007 DLOU, GNU FDL
." URL: <http://docs.linux.org.ua/index.php/Man_Contents>
." Supported by <docs@linux.org.ua>
."
." Permission is granted to copy, distribute and/or modify this document
." under the terms of the GNU Free Documentation License, Version 1.2
." or any later version published by the Free Software Foundation;
." with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
." 
." A copy of the license is included  as a file called COPYING in the
." main directory of the man-pages-* source package.
."
." This manpage has been automatically generated by wiki2man.py
." This tool can be found at: <http://wiki2man.sourceforge.net>
." Please send any bug reports, improvements, comments, patches, etc. to
." E-mail: <wiki2man-develop@lists.sourceforge.net>.

.TH "regcomp" "3" "2007-10-27-16:31" "© 2005-2007 DLOU, GNU FDL" "2007-10-27-16:31"

.SH "НАЗВА"
.PP
regcomp,  regexec,  regerror, regfree \- функції регулярних виразів POSIX

.SH "СТИСЛИЙ ОГЛЯД"
.PP
\fB#include\fR \fB<sys/types.h>\fR
.br

\fB#include\fR \fB<regex.h>\fR
.br

\fBint regcomp(regex_t\fR \fB*\fR\fIpreg\fR\fB, const char *\fR\fIregex\fR\fB, int\fR \fIcflags\fR\fB);\fR
.br

\fBint regexec(const regex_t *\fR\fIpreg\fR\fB, const char *\fR\fIstring\fR\fB, size_t\fR \fInmatch\fR\fB,  regmatch_t\fR   \fIpmatch[]\fR\fB, int\fR \fIeflags\fR\fB);\fR
.br

\fBsize_t regerror(int\fR  \fIerrcode\fR\fB,  const  regex_t  *\fR\fIpreg\fR\fB, char *\fR\fIerrbuf\fR\fB, size_t\fR \fIerrbuf\fR\fB_\fR\fIsize\fR\fB);\fR
.br

\fBvoid regfree(regex_t *\fR\fIpreg\fR\fB);\fR

.SH "КОМПІЛЯЦІЯ РЕГУЛЯРНИХ ВИРАЗІВ POSIX"
.PP
\fBregcomp\fR служить  для  "компіляції"  регулярного  виразу  і
надання  йому  форми,  придатної  для подальших пошуків за
допомогою \fBregexec\fR.

\fBregcomp\fR візьме як аргументи: \fIpreg\fR \-  покажчик  на  область
буферу,  де  компільований  шаблон буде збережено, \fIregex\fR \-
покажчик на ланцюжок з нульовим  закінченням  і  \fIcflags\fR  \-
прапорцi,  використовувані для визначення типу компіляції.

Усі пошуки регулярних виразів повинні  виконуватись  через
компільований   буферний   шаблон,   тож   \fBregexec\fR  завжди
отримуватиме адресу буферу, у якому  знаходиться  бінарний
шаблон, компільований \fBregcomp\fR.

\fIcflags\fR  може  бути  порозрядним АБО одного або декількох з
наступного:

.TP
.B \fBREG_EXTENDED\fR
Використовувати  синтаксис  розширених   регулярних виразів  POSIX  під  час інтерпретації \fIregex\fR.  Якщо цей  прапор  не   включено,   то   використовується синтаксис простих регулярних виразів POSIX.
.TP
.B \fBREG_ІCASE\fR
 Не  враховувати  регістру  літер.  Наступні  пошуки \fBregexec\fR з використанням шаблона у буфері не  будуть залежати від регістру.
.TP
.B \fBREG_NOSUB\fR
 Не вимагати підтримки адресації до частин ланцюжків всередині збігів.  Параметри \fInmatch\fR  і  \fIpmatch\fR  для \fBregexec\fR ігноруються, якщо даний буферний шаблон був скомпільований з цим прапором.
.TP
.B \fBREG_NEWLІNE\fR
 Оператори, що збігаються з будь\-якими символами не  співпадатимусть з новим рядком, тим не менш.
.br

.br
Негативний  список  (\fB[^...]\fR),  у  якому  не вказано знаку нового рядка, не збігатиметься автоматично  з новим   рядком. 
.br

.br
Оператори   початку   рядків  (\fB^\fR) співпадатимуть з порожнім  ланцюжком  одразу  після знаку  нового  рядка незалежно від того, чи \fIeflags\fR, прапор виконання \fBregexec\fR, містить \fBREG_NOTBOL\fR.
.br

.br
Оператор кінця рядка (\fB$\fR) збігатиметься  з  порожнім ланцюжком  перед перед самим символом нового рядка, незалежно від того, чи \fIeflags\fR містить \fBREG_NOTEOL\fR.

.SH "СПІВПАДАННЯ З РЕГУЛЯРНИМИ ВИРАЗАМИ POSIX"
.PP
\fBregexec\fR  використовується  для  порівнювання  ланцюжків  з
нульовим  закінченням  із  попередньо\-обробленим  буферним
шаблоном \fIpreg\fR.  Змінні \fInmatch\fR та  \fIpmatch\fR  використовуються
щоб  отримати  інформацію  про  місцезнаходження будь\-яких
збігів.  \fIeflags\fR може бути порозрядним АБО одного або  обох
\fBREG_NOTBOL\fR і \fBREG_NOTEOL\fR.  Ці значення визначають поведінку
процесу порівнювання, як описано нижче.

.TP
.B \fBREG_NOTBOL\fR
 Оператор початку нового рядка завжди зазнає навдачі (але   дивіться,   описаний  вище,  прапор  обробки \fBREG_NEWLІNE\fR).  Цей прапор  може  використовуватись, коли   у   \fBregexec\fR   обробляються   окремі  частини ланцюжків,  і  початок  таких  частин,   у   даному випадку,  не повинен розглядатись як початок нового рядка.
.TP
.B \fBREG_NOTEOL\fR
 Не береться до уваги  оператор  кінця  рядка   (але дивіться,    описаний    вище,    прапор    обробки \fBREG_NEWLІNE\fR).

.SH "ПОЗИЦІЯ БАЙТІВ"
.PP
Хіба \fBREG_NOSUB\fR  було  встановлено  для  обробки  буферного
шаблону,  завжди  є  можливість  отримати  інформацію  про
положення внутрішньо\-ланцюжкових збігів.   \fIpmatch\fR  повинно
бути визначена так, щоб мати, принаймні, \fInmatch\fR елементів.
Вони заповнюються \fBregexec\fR\-адресами  внутрішньо\-ланцюжкових
збігів.  Будь\-які  невикористані елементи структури будуть
містити значення \-1.

Структура \fBregmatch_t\fR, що є типом для \fIpmatch\fR,  визначено  у
\fIregex.h\fR:

.RS
.nf
 \fBtypedef\fR \fBstruct\fR
 \fB{\fR
 \fBregoff_t\fR \fIrm\fR\fB_\fR\fIso\fR\fB;\fR
 \fBregoff_t\fR \fIrm\fR\fB_\fR\fIeo\fR\fB;\fR
 \fB}\fR \fBregmatch_t;\fR

.fi
.RE
Кожен  елемент  \fIrm\fR\fB_\fR\fIso\fR,  не  рівний \-1, вказує зсув початку
збігу. Відносний  елемент  \fIrm_eo\fR  вказує на зсув кінця збігу.

.SH "ПОВІДОМЛЕННЯ ПРО ПОМИЛКИ ВІДПОВІДНО ДО СТАНДАРТУ POSIX"
.PP
\fBregerror\fR використовується для перетворення кодів  помилок,
що   повертаються   обома   \fBregcomp\fR  і  \fBregexec\fR,  у  рядки
повідомлень про помилки.

Через \fBregerror\fR проходять: код  помилки  \fIerrcode\fR,  буферний
шаблон  \fIpreg\fR,  покажчик на символьний буфер рядка \fIerrbuf\fR і
розмір буферу рядка \fIerrbuf\fR\fB_\fR\fIsіze\fR.   Буде  повернуто  розмір
\fIerrbuf\fR,  необхідного  для  утримування  рядка  з  нульовим
закінченням, містячого повідомленням  про   помилку.  Якщо
\fIerrbuf\fR   і   \fIerrbuf\fR\fB_\fR\fIsіze\fR   не   є   нульовими,  то  \fIerrbuf\fR
заповнюється   першими   \fIerrbuf\fR\fB_\fR\fIsіze\fR   \fI\-\fR    \fI1\fR    символами
повідомлення про помилку і завершуються нулем.

.SH "ВИВІЛЬНЕННЯ БУФЕРУ ШАБЛОНУ ВІДПОВІДНО З POSIX"
.PP
Після  надання  \fBregfree\fR  попередньо  обробленого буферного
шаблону, \fIpreg\fR звільнить пам'ять, відведену цьому шаблонові
під час процесу компіляції \fBregcomp\fR.

.SH "ПОВЕРНЕНЕ ЗНАЧЕННЯ"
.PP
\fBregcomp\fR  повертає  нуль  при  успішній  компіляції або код
помилки у випадку невдачі.

\fBregexec\fR   повертає   нуль   у   випадку   співпадань   або
\fBREG_NOMATCH\fR, якщо співпадань не відбулося.

.SH "КОДИ ПОМИЛОК"
.PP
\fBregcomp\fR може повертати наступні помилки:

.TP
.B \fBREG_BADRPT\fR
 Невірне    використання    операторів   повторення, наприклад '*' як перший символ.
.TP
.B \fBREG_BADBR\fR
 Невірне використання операторів зворотних посилань.
.TP
.B \fBREG_EBRACE\fR
 Відсутня пара фігурної дужки.
.TP
.B \fBREG_EBRACK\fR
 Відсутня  пара квадратної дужки (оператори списку).
.TP
.B \fBREG_ERANGE\fR
 Невірне використання операторів інтервалу: у  цьому випадку   кінець інтервалу  з'являється  до  його початку.
.TP
.B \fBREG_ECTYPE\fR
 Невідома назва класу символів.
.TP
.B \fB REG_ECOLLATE\fR
 Невірний  елемент  сортування,  помилка  сортування елементів.
.TP
.B \fBREG_EPAREN\fR
 Відсутня  пара круглої дужки (оператор групування).
.TP
.B \fBREG_ESUBREG\fR
 Помилкове зворотнє посилання на частину виразу.
.TP
.B \fBREG_EEND\fR
 Невизначена помилка. (Не описана у POSIX.2.)
.TP
.B \fBREG_EESCAPE\fR
 Кінцевий зворотній слеш.
.TP
.B \fBREG_BADPAT\fR
 Невірне використання операторів шаблону,  таких  як оператори групи або списку.
.TP
.B \fBREG_ESІZE\fR
 Компільований  регулярний  вираз  вимагає  буферний шаблон розміром більшим за 64  Кб.  (Не  описано  у POSIX.2.)
.TP
.B \fBREG_ESPACE\fR
 Виснаження пам'яті функціями регулярних виразів.

.SH "ВІДПОВІДНІСТЬ СТАНДАРТАМ"
.PP
POSIX.2

.SH "ДИВІТЬСЯ ТАКОЖ"
.PP
\fBregex\fR(7), GNU regex manual

\-\-\-\-
Переклав українською Віталій Цибуляк <vi@uatech.atspace.com>

