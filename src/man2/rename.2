." © 2005-2007 DLOU, GNU FDL
." URL: <http://docs.linux.org.ua/index.php/Man_Contents>
." Supported by <docs@linux.org.ua>
."
." Permission is granted to copy, distribute and/or modify this document
." under the terms of the GNU Free Documentation License, Version 1.2
." or any later version published by the Free Software Foundation;
." with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
." 
." A copy of the license is included  as a file called COPYING in the
." main directory of the man-pages-* source package.
."
." This manpage has been automatically generated by wiki2man.py
." This tool can be found at: <http://wiki2man.sourceforge.net>
." Please send any bug reports, improvements, comments, patches, etc. to
." E-mail: <wiki2man-develop@lists.sourceforge.net>.

.TH "rename" "2" "2007-10-27-16:31" "© 2005-2007 DLOU, GNU FDL" "2007-10-27-16:31"

." RENAME 3 2006-06-03 "Linux 2.0" "Посібник програміста Лінукса" 

.SH "Назва"
.PP
rename \- змінює назву і місцеположення файлу 

.SH "Огляд"
.PP
\fB#include <stdio.h>\fR 

\fBint rename(const char *\fR\fIoldpath\fR\fB, const char *\fR\fInewpath\fR\fB);\fR 

.SH "Опис"
.PP
\fBrename\fR міняє назву файлу, переміщуючи його між директоріями, якщо необхідно. 

Будь\-які інші жорсткі посилання на файл (створених, наприклад, \fBlink\fR(2)) залишаються незмінними. 

Якщо \fInewpath\fR вже існує, його буде автоматично замінено (за кількома умовами \- дивіться \fBПОМИЛКИ\fR нижче), тож не буде такого моменту, коли якийсь процес, що намагається отримати доступ до файлу, не знайде його. 

Якщо \fInewpath\fR існує, але операція з якоїсь причини зазнає невдачі, \fBrename\fR гарантує залишити один взірець \fInewpath\fR на місці. 

Не зважаючи на це, під час перезапису може виявитись момент у якому \fIoldpath\fR і \fInewpath\fR, обидва, посилатумуться на файл, чия назва змінюється. 

Якщо \fIoldpath\fR вказує на символічне посилання, останнє змінить назву; якщо \fInewpath\fR вказує на символічне посилання, його буде перезаписано. 

.SH "Повернені значення"
.PP
При вдалому виконанні повертається нуль, при помилці повертається \-1 і змінна \fIerrno\fR набуде відповідного значення. 

.SH "Помилки"
.PP
\fBEISDIR\fR \fInewpath\fR \- це вже існуючий каталог, але \fIoldpath\fR не є каталогом. 

.TP
.B \fBEXDEV\fR
 \fInewpath\fR і \fIoldpath\fR не знаходяться на тій самій файловій системі. 

.TP
.B \fBENOTEMPTY\fR або \fBEEXIST\fR
 \fInewpath\fR \- це непорожній каталог, томбто містить об'єкти окрім "." або "..". 

.TP
.B \fBEBUSY\fR
 \fBrename\fR зазнав невдачі, оскільки \fIoldpath\fR або \fInewpath\fR є каталогом, використовуваним якомось процесом (напевне, як поточна робоча директорія, кореневий каталог або сиректорію відкрито для читання) або використовується системою (наприклад, як пункт приєднання інших файлових систем). Система вважає це помилкою. (Зауважте, що не вимагається повернення \fBEBUSY\fR в таких випадках \- нічого не забороняє виконувати \fBrename\fR, \fBEBUSY\fR лише дозволяється повернути у випадках, якщо система не в змозі опрацювати такі ситуації. 

.TP
.B \fBEINVAL\fR
 Нова назва шляху, \fIpathname\fR, містить префікс шляху старої, або, більш узагальнено, відбулася спроба створення каталогу, як підкаталог самого себе. 

.TP
.B \fBEMLINK\fR
 \fIoldpath\fR вже має максимально\-дозволене число посилань на себе, або це був каталог і каталог, що містить \fInewpath\fR має максимально\-дозволене число посилань. 

.TP
.B \fBENOTDIR\fR
 Складова, що була використана як назва каталогу для \fIoldpath\fR або \fInewpath\fR, насправді, не є такою. Або \fIoldpath\fR є каталогом, а \fInewpath\fR вже існує, але не як каталог. 

.TP
.B \fBEFAULT\fR
 \fIoldpath\fR або \fInewpath\fR вказують поза межі доступного простору адрес. 

.TP
.B \fBEACCES\fR
 Немає дозволу на запис каталогу, де міститься \fIoldpath\fR або \fInewpath\fR для дійсного UID процесу, або в одному з каталогів з \fIoldpath\fR або \fInewpath\fR не дозволяється пошук (не встановлений дозвіл на виконання), або \fIoldpath\fR \- це каталог, в якому заборонено запис (необхідний для поновлення компоненти ".."). 

.TP
.B \fBEPERM\fR або \fBEACCES\fR
 Каталог, що містить \fIoldpath\fR має встановленим стійкий біт і UID процесу не дорівнює ні ідентифікаційному номеру надкористувача ні UID файлу видалення, ні UID каталогу, де міститься \fIoldpath\fR, або \fInewpath\fR вже існує і каталог, де він міститься має встановленим стійкий біт з і UID процесу не дорівнює ні ідентифікаційному номеру надкористувача ні UID файлу до заміни, ні UID каталогу, де міститься \fInewpath\fR, або файлова система не підтримує зміни назв вказаного типу. 

.TP
.B \fBENAMETOOLONG\fR
 Назви \fIoldpath\fR або \fInewpath\fR занадто довгі. 

.TP
.B \fBENOENT\fR
 Каталогова складова \fIoldpath\fR або \fInewpath\fR не існує або ж це зависле символічне посилання. 

.TP
.B \fBENOMEM\fR
 Недостатньо пам'яті ядра. 

.TP
.B \fBEROFS\fR
 Файл знаходиться на файловій системі тільки для читання. 

.TP
.B \fBELOOP\fR
 Забагато символічних посилань при спробі розв'язання \fIoldpath\fR або \fInewpath\fR. 

.TP
.B \fBENOSPC\fR
 Пристрій, де знаходиться файл, не має достатньо місця для створення нової директорії. 

.SH "Відповідність стандартам"
.PP
POSIX, 4.3BSD, ANSI C 

.SH "Вади"
.PP
На мережній файовій системі NFS, ви не можете бути певними, що якщо операція по зміні назви зазнала невдачі, файл не було перейменовано. Якщо сервер здійснив \fIrename\fR і дав збій, повторна передача RPC після того, як роботу серверу відновлено, спричинює вихід з ладу. Додаткам доводиться самим мати справу з такими ситуаціями. Дивіться \fBlink\fR(2) щодо подібних помилок. 

.SH "Дивіться також"
.PP
\fBlink\fR(2), \fBunlink\fR(2), \fBsymlink\fR(2), \fBmv\fR(1)

.RS
.nf
   

.fi
.RE
